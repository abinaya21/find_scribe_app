<% provide(:title, 'Service Request List') %>

<h1>List of Service Requests</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_tag do %>
      <%= select_tag "filter", options_for_select(@filter_options, selected: @request_filter), onchange:  "request_filter_changed(this.value)" %>
    <% end %>
   <%= will_paginate %>
    <table class="table table-striped">
      <thead>
        <td>Location</td>
        <td>Date</td>
        <td>From</td>
        <td>To</td>
        <td>Language</td>
        <td>Action(s)</td>
      </thead>
      <tbody>
        <%= render @service_requests %>
      </tbody>
    </table>
  <%= will_paginate %>
  </div>
</div>

<script>
  function request_filter_changed(val) {
    window.location.href = "<% service_requests_path %>?filter=" + val;
  }

</script>